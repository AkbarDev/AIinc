# TrendGrid Knowledge Base

_Last updated: 11 February 2026_

## 1. Vision & Scope
- **Domain**: snapfacts.in (GitHub Pages + Cloudflare).
- **Goal**: Open, static-first platform surfacing globally trending technology/media/culture/gaming news derived from open RSS feeds.
- **Key principles**: fully open-source stack, zero vendor lock-in, lightweight static hosting, auditable scoring.

## 2. Evolution Timeline
1. **Initial brainstorming** – outlined pop-culture newsroom structure (SnapFacts briefs, release radar, etc.).
2. **Repo migration** – renamed local folder to `ainews`, cloned `AkbarDev/AIinc`, wiped legacy RSS aggregator UI.
3. **Rebuild** – implemented new "TrendGrid" interface (index.html/css/style.css/js/app.js) with static data arrays.
4. **Data pipeline** – added `scripts/fetch_feeds.py`, `config/sources.json`, `data/trends.json` sample output.
5. **Automation** – created GitHub Action `refresh-trends.yml` to refresh feeds + badges every 5 minutes with Slack failure alert support.
6. **Badge telemetry** – script now emits `data/badges/last-refresh.json` and `feeds-polled.json`; README shows Shields badges.
7. **MVP testing** – manual previews via `python3 -m http.server` and on-demand Actions dry runs.

## 3. Architecture Snapshot
```
User Browser
  ↓
Static Site (index.html, css/style.css, js/app.js)
  ↓ fetch
`data/trends.json` + `config/sources.json`
  ↑ generated by
`python scripts/fetch_feeds.py`
  ↑ triggered by
GitHub Actions (`refresh-trends.yml`)
  ↑ reads
Open RSS sources listed in `config/sources.json`
```
- **Trend score** = 0.30×source_signal + 0.25×recency + 0.20×keywords + 0.15×authority + 0.10×engagement.
- **Outputs**: ranked `trends`, metadata (sources scanned, feeds polled/pool), and badges.

## 4. Repository Map
| Path | Description |
| --- | --- |
| `index.html` | TrendGrid layout with hero, signal board, filters, trend grid, timeline, methodology, sources. |
| `css/style.css` | Neon/brutalist dashboard styling + skeleton loaders. |
| `js/app.js` | Fetches JSON, renders hero/stats/timeline, handles filters, fallback data. |
| `config/sources.json` | List of 10 high-authority RSS feeds (Google/Bing/Wired/Variety/etc.). |
| `scripts/fetch_feeds.py` | Feed ingestion, deduping, scoring, badge writer, skip-if-unchanged logic. |
| `data/trends.json` | Latest trend snapshot tracked in git. |
| `data/badges/*.json` | Shields endpoints for “last refresh” and “feeds polled”. |
| `.github/workflows/refresh-trends.yml` | 5-min cron workflow with Slack failure notification. |
| `docs/knowledge-base.md` | (this file) ongoing project notes. |
| `docs/integrations.md` | Integration/webhook matrix (see separate doc). |

## 5. Operational Playbook
### Local
```
# Sample data
scripts/fetch_feeds.py --sample

# Live fetch (requires network)
scripts/fetch_feeds.py

# Preview UI
python3 -m http.server 8000
```
### CI/CD
1. Workflow schedules every 5 minutes.
2. Script skips commits if RSS output unchanged (prevents noisy pushes).
3. Optional Slack alert via `SLACK_WEBHOOK_URL` secret.
4. Push to `main` triggers GitHub Pages deploy to snapfacts.in.

## 6. Testing Checklist
- ✅ `python3 -m http.server 8000` – manual smoke test; verify hero, filters, data render.
- ✅ `scripts/fetch_feeds.py --sample` – ensures ingestion + badges succeed offline.
- ✅ GitHub Actions dry run – check workflow logs for successful fetch/commit.
- ⬜️ (Future) add Cypress/Playwright regression script or visual tests once dynamic feeds go live.

## 7. Backlog & Enhancements
1. **Advanced clustering** – embeddings or NLP topic grouping.
2. **Geo heatmap + timeline** – highlight regional trend velocity.
3. **CMS/editor notes** – integrate Decap CMS for analyst commentary.
4. **Historical archives** – store daily snapshots for MoM/YoY comparisons.
5. **User personalization** – saved filters, push notifications, newsletter integration.
6. **Observability** – metrics for feed failure rate, scoring distribution, API latency.

## 8. Key Decisions & Considerations
- Stay in static hosting to keep opex zero; heavy lifting handled in GitHub Actions.
- Use only open/public RSS sources; no paid APIs yet.
- Frequent cron (5 min) but skip writes when feeds haven’t changed → reduces git churn.
- Provide transparency via badges + README documentation.

_Keep this doc updated when architecture, workflows, or major policies change._
